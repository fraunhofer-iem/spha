stages:
  - test
  - release

# Verify that the component structure is correct
test-component:
  stage: test
  image: alpine:latest
  tags:
    - shared
  script:
    - echo "Validating component files..."

# Create a release in the GitLab Component Catalog
create-release:
  stage: release
  image: registry.gitlab.com/gitlab-org/release-cli:latest
  tags:
    - shared
  script:
    - echo "Creating release for tag $CI_COMMIT_TAG"
  release:
    tag_name: $CI_COMMIT_TAG
    description: "Release $CI_COMMIT_TAG of the SPHA-CLI component"
  rules:
    - if: $CI_COMMIT_TAG
